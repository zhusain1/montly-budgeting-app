[{"/Users/Zulfi/Documents/montly-budgeting-app/src/index.js":"1","/Users/Zulfi/Documents/montly-budgeting-app/src/functional_components/App.js":"2","/Users/Zulfi/Documents/montly-budgeting-app/src/components/Transactions.js":"3","/Users/Zulfi/Documents/montly-budgeting-app/src/components/Login.js":"4","/Users/Zulfi/Documents/montly-budgeting-app/src/components/Create.js":"5","/Users/Zulfi/Documents/montly-budgeting-app/src/functional_components/MainCard.js":"6","/Users/Zulfi/Documents/montly-budgeting-app/src/components/LinkBank.js":"7","/Users/Zulfi/Documents/montly-budgeting-app/src/apis.js":"8","/Users/Zulfi/Documents/montly-budgeting-app/src/functional_components/ListAccounts.js":"9","/Users/Zulfi/Documents/montly-budgeting-app/src/functional_components/Navbar.js":"10","/Users/Zulfi/Documents/montly-budgeting-app/src/functional_components/LoggedInNavbar.js":"11","/Users/Zulfi/Documents/montly-budgeting-app/src/functional_components/Logout.js":"12","/Users/Zulfi/Documents/montly-budgeting-app/src/functional_components/Error.js":"13","/Users/Zulfi/Documents/montly-budgeting-app/src/components/ForgotPassword.js":"14","/Users/Zulfi/Documents/montly-budgeting-app/src/functional_components/Footer.js":"15","/Users/Zulfi/Documents/montly-budgeting-app/src/components/AddBank.js":"16"},{"size":1182,"mtime":1615927194271,"results":"17","hashOfConfig":"18"},{"size":232,"mtime":1612986582144,"results":"19","hashOfConfig":"18"},{"size":7194,"mtime":1615271142020,"results":"20","hashOfConfig":"18"},{"size":5893,"mtime":1615994961522,"results":"21","hashOfConfig":"18"},{"size":4117,"mtime":1615676364031,"results":"22","hashOfConfig":"18"},{"size":1027,"mtime":1614283394720,"results":"23","hashOfConfig":"18"},{"size":3444,"mtime":1616109525588,"results":"24","hashOfConfig":"18"},{"size":172,"mtime":1616110424945,"results":"25","hashOfConfig":"18"},{"size":2665,"mtime":1616007138637,"results":"26","hashOfConfig":"18"},{"size":1231,"mtime":1615271142022,"results":"27","hashOfConfig":"18"},{"size":1514,"mtime":1616159677605,"results":"28","hashOfConfig":"18"},{"size":168,"mtime":1614283394719,"results":"29","hashOfConfig":"18"},{"size":473,"mtime":1614283394716,"results":"30","hashOfConfig":"18"},{"size":6128,"mtime":1615271142018,"results":"31","hashOfConfig":"18"},{"size":520,"mtime":1615271142021,"results":"32","hashOfConfig":"18"},{"size":5690,"mtime":1616154633448,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"1624kqg",{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"39"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"68","usedDeprecatedRules":"36"},"/Users/Zulfi/Documents/montly-budgeting-app/src/index.js",[],["69","70"],"/Users/Zulfi/Documents/montly-budgeting-app/src/functional_components/App.js",[],["71","72"],"/Users/Zulfi/Documents/montly-budgeting-app/src/components/Transactions.js",[],"/Users/Zulfi/Documents/montly-budgeting-app/src/components/Login.js",[],"/Users/Zulfi/Documents/montly-budgeting-app/src/components/Create.js",[],"/Users/Zulfi/Documents/montly-budgeting-app/src/functional_components/MainCard.js",[],"/Users/Zulfi/Documents/montly-budgeting-app/src/components/LinkBank.js",[],"/Users/Zulfi/Documents/montly-budgeting-app/src/apis.js",[],"/Users/Zulfi/Documents/montly-budgeting-app/src/functional_components/ListAccounts.js",[],"/Users/Zulfi/Documents/montly-budgeting-app/src/functional_components/Navbar.js",[],"/Users/Zulfi/Documents/montly-budgeting-app/src/functional_components/LoggedInNavbar.js",[],"/Users/Zulfi/Documents/montly-budgeting-app/src/functional_components/Logout.js",[],"/Users/Zulfi/Documents/montly-budgeting-app/src/functional_components/Error.js",[],"/Users/Zulfi/Documents/montly-budgeting-app/src/components/ForgotPassword.js",[],"/Users/Zulfi/Documents/montly-budgeting-app/src/functional_components/Footer.js",[],"/Users/Zulfi/Documents/montly-budgeting-app/src/components/AddBank.js",["73","74"],"import React, { Component } from 'react';\nimport { PlaidLink } from 'react-plaid-link';\nimport { withRouter } from 'react-router-dom';\nimport api from '../apis';\nimport Typography from '@material-ui/core/Typography';\nimport Alert from '@material-ui/lab/Alert';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport LoggedInNavbar from '../functional_components/LoggedInNavbar';\nimport MainCard from '../functional_components/MainCard';\n\nclass AddBank extends Component {\n\n    constructor(props){\n        super(props);\n\n        this.getLocalStorage();\n\n        const url = '/LinkToken'\n\n        api.get(url)\n        .then(res => {\n            this.setState({\n                linkToken: res.data.link_token\n            });\n        })\n\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    getLocalStorage = () => {\n\n        if(sessionStorage.getItem('loggedIn') != null){\n\n            console.log('Mounting and setting local state');\n\n            const {accounts, access_token, email} = JSON.parse(sessionStorage.getItem('loggedIn'));\n\n            try {\n                this.state = {\n                    email: email,\n                    institution: '',\n                    accounts: accounts,\n                    accessToken: access_token,\n                    error: '',\n                    displayPlaidLink: false\n                    };   \n            } catch (error) {\n                this.props.history.push('/');\n            }\n        } else{\n\n            this.state = {\n                displayPlaidLink: false,\n                accounts: [],\n                error: ''\n             };\n\n            console.log('redirecting back to login page');\n\n            return this.props.history.push('/');\n        }\n    }\n\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n\n        this.setState({\n            displayPlaidLink: true\n        });\n\n        console.log(this.state);\n    } \n\n\n    renderLink = () => {\n        return (\n            <>\n                <Typography variant=\"h6\">\n                        Add bank\n                </Typography>\n                <br/>\n                <PlaidLink\n                token= {this.state.linkToken}\n                onSuccess={this.onSuccess}\n                >\n                    Connect to bank\n                </PlaidLink>\n            </>\n        );\n    }\n\n    displayLink = () => {\n        if(this.state.displayPlaidLink){\n            return this.renderLink();\n        } \n        \n        else{\n            return this.addInstitution();\n        }\n    }\n\n    // Add bank \n\n    addInstitution = () => {\n        return(\n            <div>\n                {this.state.error.length > 0 &&\n                 <Alert severity=\"error\"> {this.state.error}</Alert>\n                }\n                <form onSubmit={this.handleSubmit} autoComplete=\"off\" >\n                    <TextField id=\"institution\" label=\"Add bank\" value={this.state.institution} onChange={e => this.setState({institution: e.target.value})}/>\n                    <br/>\n                    <br/>\n                    <Button variant=\"outlined\" type=\"submit\">\n                        Add\n                    </Button>\n                </form>\n                <br/>\n            </div>\n        );\n    }\n\n    onSuccess = (token, metadata) => {\n        // Call Token Exchange Endpoint\n\n        const url = '/TokenExchange'\n\n        const publicToken = {\n            public_token : token\n        };\n\n        api({\n            method: 'post',\n            url: url,\n            data: publicToken\n        }).then((res) => {\n\n            this.setState({\n                accessToken: res.data.access_token\n            })\n\n            this.saveAccessToken(this.state.accessToken);\n        })\n    };\n\n    // api call to save access token to DB for a specific user\n    saveAccessToken = (accessToken) => {\n        const url = '/updateToken'\n\n        const req = {\n            email: this.state.email, \n            access_token: accessToken,\n            institution: this.state.institution\n        };\n\n        console.log(req)\n\n        api({\n            method: 'post',\n            url: url,\n            data: req\n        }).then((res) => {\n            console.log(res.data)\n\n            this.transactionData(res.data)\n        })\n    }\n\n    transactionData = (accessToken) => {\n\n        const url = '/TransactionDetails'\n\n        const req = accessToken;\n\n        api({\n            method: 'post',\n            url: url,\n            data: req\n        }).then((res) => {       \n            \n            console.log(res)\n            \n            this.setState({\n                accounts: res.data,\n                error: ''\n            })\n\n            const loggedIn = { access_token: accessToken, accounts: res.data, email: this.state.email, loggedIn: true }\n\n            sessionStorage.setItem('loggedIn', JSON.stringify(loggedIn));\n\n            this.props.history.push('/');\n\n        }).catch(err => {\n            this.setState({\n                error: 'Error logging in with account',\n            })\n        })\n    }\n\n\n    redirectToLogin(){\n        const loggedIn = { access_token: this.state.accessToken, accounts: this.state.accounts, loggedIn: true }\n\n        sessionStorage.setItem('loggedIn', JSON.stringify(loggedIn));\n\n        this.props.history.push('/');\n    }\n\n    render() {\n        return (\n                <>\n                     <LoggedInNavbar/>\n                     <MainCard>\n                        <div className= \"Plaid\">\n                            { this.displayLink() }\n                        </div>\n                    </MainCard>\n                </>\n        );\n    }\n}\nexport default withRouter(AddBank);\n",{"ruleId":"75","replacedBy":"76"},{"ruleId":"77","replacedBy":"78"},{"ruleId":"75","replacedBy":"79"},{"ruleId":"77","replacedBy":"80"},{"ruleId":"81","severity":1,"message":"82","line":40,"column":17,"nodeType":"83","endLine":40,"endColumn":21},{"ruleId":"81","severity":1,"message":"82","line":53,"column":13,"nodeType":"83","endLine":53,"endColumn":17},"no-native-reassign",["84"],"no-negated-in-lhs",["85"],["84"],["85"],"react/no-direct-mutation-state","Do not mutate state directly. Use setState().","ThisExpression","no-global-assign","no-unsafe-negation"]